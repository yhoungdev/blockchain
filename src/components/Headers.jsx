import { Avatar, Box, Flex, Menu, MenuButton, MenuItem, Text, MenuList } from "@chakra-ui/react";
import Buttons from "./Buttons";
import {MdOutlineArrowDropDown} from 'react-icons/md'
import {HiOutlineLogout} from 'react-icons/hi'
import {AiOutlineUser} from 'react-icons/ai'
import { useAuth0 } from "@auth0/auth0-react";
import LoginButton from '../Pages/Auth/AuthLogin';


const Header = () => {

    
    
    const { user, isAuthenticated ,  logout} = useAuth0();
    console.log(user)
    const logOut = () => {
        logout({returnTo: window.location.origin})
        window.location.reload()
    };
    return (
        <>

            <Box px={['','10em']}>
            <Flex justifyContent={'space-between'}  py={'1em'} bg={'#fff'}>
                
                
                <Box>
                        <svg width="120" height="30" viewBox="0 0 120 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M30.8963 29V7.18182H39.5043C41.1591 7.18182 42.5689 7.49787 43.7337 8.12997C44.8984 8.75497 45.7862 9.625 46.397 10.7401C47.0149 11.848 47.3239 13.1264 47.3239 14.5753C47.3239 16.0241 47.0114 17.3026 46.3864 18.4105C45.7614 19.5185 44.8558 20.3814 43.6697 20.9993C42.4908 21.6172 41.0632 21.9261 39.3871 21.9261H33.9006V18.2294H38.6413C39.5291 18.2294 40.2607 18.0767 40.8359 17.7713C41.4183 17.4588 41.8516 17.0291 42.1357 16.4822C42.4268 15.9283 42.5724 15.2926 42.5724 14.5753C42.5724 13.8509 42.4268 13.2187 42.1357 12.679C41.8516 12.1321 41.4183 11.7095 40.8359 11.4112C40.2536 11.1058 39.5149 10.9531 38.62 10.9531H35.5092V29H30.8963ZM54.4616 29.3089C53.4176 29.3089 52.4872 29.1278 51.6705 28.7656C50.8537 28.3963 50.2074 27.853 49.7315 27.1357C49.2628 26.4112 49.0284 25.5092 49.0284 24.4297C49.0284 23.5206 49.1953 22.7571 49.5291 22.1392C49.8629 21.5213 50.3175 21.0241 50.8928 20.6477C51.468 20.2713 52.1214 19.9872 52.853 19.7955C53.5916 19.6037 54.3658 19.4688 55.1754 19.3906C56.1271 19.2912 56.8942 19.1989 57.4766 19.1136C58.0589 19.0213 58.4815 18.8864 58.7443 18.7088C59.0071 18.5312 59.1385 18.2685 59.1385 17.9205V17.8565C59.1385 17.1818 58.9254 16.6598 58.4993 16.2905C58.0803 15.9212 57.4837 15.7365 56.7095 15.7365C55.8928 15.7365 55.2429 15.9176 54.7599 16.2798C54.277 16.6349 53.9574 17.0824 53.8011 17.6222L49.6037 17.2812C49.8168 16.2869 50.2358 15.4276 50.8608 14.7031C51.4858 13.9716 52.2919 13.4105 53.2791 13.0199C54.2734 12.6222 55.424 12.4233 56.7308 12.4233C57.6399 12.4233 58.5099 12.5298 59.3409 12.7429C60.179 12.956 60.9212 13.2862 61.5675 13.7337C62.2209 14.1811 62.7358 14.7564 63.1122 15.4595C63.4886 16.1555 63.6768 16.9901 63.6768 17.9631V29H59.3729V26.7308H59.245C58.9822 27.2422 58.6307 27.6932 58.1903 28.0838C57.75 28.4673 57.2209 28.7692 56.603 28.9893C55.9851 29.2024 55.2713 29.3089 54.4616 29.3089ZM55.7614 26.1768C56.429 26.1768 57.0185 26.0455 57.5298 25.7827C58.0412 25.5128 58.4425 25.1506 58.7337 24.696C59.0249 24.2415 59.1705 23.7266 59.1705 23.1513V21.4148C59.0284 21.5071 58.8331 21.5923 58.5845 21.6705C58.343 21.7415 58.0696 21.8089 57.7642 21.8729C57.4588 21.9297 57.1534 21.983 56.848 22.0327C56.5426 22.0753 56.2656 22.1143 56.017 22.1499C55.4844 22.228 55.0192 22.3523 54.6214 22.5227C54.2237 22.6932 53.9148 22.924 53.6946 23.2152C53.4744 23.4993 53.3643 23.8544 53.3643 24.2805C53.3643 24.8984 53.5881 25.3707 54.0355 25.6974C54.4901 26.017 55.0653 26.1768 55.7614 26.1768ZM67.1978 29V12.6364H71.5977V15.4915H71.7681C72.0664 14.4759 72.5671 13.7088 73.2702 13.1903C73.9734 12.6648 74.783 12.402 75.6992 12.402C75.9265 12.402 76.1715 12.4162 76.4343 12.4446C76.6971 12.473 76.9279 12.5121 77.1268 12.5618V16.5888C76.9137 16.5249 76.619 16.468 76.2425 16.4183C75.8661 16.3686 75.5217 16.3438 75.2092 16.3438C74.5415 16.3438 73.945 16.4893 73.4194 16.7805C72.9009 17.0646 72.489 17.4624 72.1836 17.9737C71.8853 18.4851 71.7362 19.0746 71.7362 19.7422V29H67.1978ZM79.4732 29V12.6364H83.873V15.4915H84.0435C84.3418 14.4759 84.8425 13.7088 85.5456 13.1903C86.2488 12.6648 87.0584 12.402 87.9746 12.402C88.2019 12.402 88.4469 12.4162 88.7097 12.4446C88.9725 12.473 89.2033 12.5121 89.4022 12.5618V16.5888C89.1891 16.5249 88.8944 16.468 88.5179 16.4183C88.1415 16.3686 87.7971 16.3438 87.4846 16.3438C86.8169 16.3438 86.2203 16.4893 85.6948 16.7805C85.1763 17.0646 84.7644 17.4624 84.459 17.9737C84.1607 18.4851 84.0115 19.0746 84.0115 19.7422V29H79.4732ZM98.3803 29.3196C96.7255 29.3196 95.2944 28.968 94.087 28.2649C92.8867 27.5547 91.9599 26.5675 91.3065 25.3033C90.6531 24.032 90.3263 22.5582 90.3263 20.8821C90.3263 19.1918 90.6531 17.7145 91.3065 16.4503C91.9599 15.179 92.8867 14.1918 94.087 13.4886C95.2944 12.7784 96.7255 12.4233 98.3803 12.4233C100.035 12.4233 101.463 12.7784 102.663 13.4886C103.87 14.1918 104.801 15.179 105.454 16.4503C106.108 17.7145 106.434 19.1918 106.434 20.8821C106.434 22.5582 106.108 24.032 105.454 25.3033C104.801 26.5675 103.87 27.5547 102.663 28.2649C101.463 28.968 100.035 29.3196 98.3803 29.3196ZM98.4016 25.804C99.1545 25.804 99.783 25.5909 100.287 25.1648C100.792 24.7315 101.172 24.142 101.427 23.3963C101.69 22.6506 101.821 21.8018 101.821 20.8501C101.821 19.8984 101.69 19.0497 101.427 18.304C101.172 17.5582 100.792 16.9687 100.287 16.5355C99.783 16.1023 99.1545 15.8857 98.4016 15.8857C97.6417 15.8857 97.0025 16.1023 96.484 16.5355C95.9727 16.9687 95.5856 17.5582 95.3228 18.304C95.0671 19.0497 94.9393 19.8984 94.9393 20.8501C94.9393 21.8018 95.0671 22.6506 95.3228 23.3963C95.5856 24.142 95.9727 24.7315 96.484 25.1648C97.0025 25.5909 97.6417 25.804 98.4016 25.804ZM118.089 12.6364V16.0455H108.235V12.6364H118.089ZM110.472 8.71591H115.01V23.9716C115.01 24.3906 115.074 24.7173 115.202 24.9517C115.33 25.179 115.507 25.3388 115.735 25.4311C115.969 25.5234 116.239 25.5696 116.544 25.5696C116.757 25.5696 116.971 25.5518 117.184 25.5163C117.397 25.4737 117.56 25.4418 117.674 25.4205L118.387 28.7976C118.16 28.8686 117.841 28.9503 117.429 29.0426C117.017 29.142 116.516 29.2024 115.926 29.2237C114.833 29.2663 113.874 29.1207 113.05 28.7869C112.233 28.4531 111.598 27.9347 111.143 27.2315C110.689 26.5284 110.465 25.6406 110.472 24.5682V8.71591Z" fill="black"/>
                        <circle cx="9" cy="20" r="9" fill="#FFA133"/>
                        </svg>

                </Box>



                <Box>
                    


                    {
                        //check if user is authenticated
                        isAuthenticated ? (
                                <>
                                
                                <Menu>
                        <MenuButton>
                            <Flex alignItems={'center'} gap={'1em'}>
                                 <Avatar size={'md'} src={user?.picture}/>
                                 <Text display={['none','block']} fontWeight={'bold'}>Hi,{user.nickname}</Text>
                                 <MdOutlineArrowDropDown size={'2em'}/>
                            </Flex>
                            <MenuList>
                                <MenuItem display={['block','']}>

                                     <Flex  alignItems={'center'} gap={"2"}>
                                     <AiOutlineUser/><Text> {user.name}</Text>
                                    </Flex>

                                </MenuItem>
                                <MenuItem onClick={logOut}>
                                   
                                    <Flex  alignItems={'center'} gap={"2"}>
                                     <HiOutlineLogout/><Text>Logout</Text>
                                    </Flex>
                                </MenuItem>
                            </MenuList>
                        </MenuButton>
                    </Menu>
                                </>
                        ) :

                        (
                            <>
                                <LoginButton />
                            </>
                        )
                    }
                </Box>

            </Flex>
            </Box>

        </>
    )
}


export default Header;